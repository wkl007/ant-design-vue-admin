"use strict";(self.webpackChunkant_desing_vue_admin=self.webpackChunkant_desing_vue_admin||[]).push([[535],{9113:function(e,a,t){t.d(a,{Z:function(){return r}});var l=t(1046);class r{static login(e){return l.Z.request({url:"/login/account",method:"post",data:e})}static getUserInfo(){return l.Z.request({url:"/currentUser",method:"get"})}static logout(){return l.Z.request({url:"/logout",method:"post"})}static register(e){return l.Z.request({url:"/register",method:"post",data:e})}}},5926:function(e,a,t){t.r(a),t.d(a,{default:function(){return b}});var l=t(6252),r=t(3577);(0,l.dD)("data-v-14879de8");const o={class:"main login"},n=(0,l.Uk)(" 获取验证码 "),s=(0,l.Uk)(" 自动登录 "),i=(0,l.Uk)(" 忘记密码 "),u=(0,l.Uk)(" 登录 "),c={class:"user-login-other"},d=(0,l._)("span",null,"其他登录方式",-1),m=(0,l.Uk)(" 注册账户 ");(0,l.Cn)();var p=t(2262),f=t(4709),g=t(2119),v=t(6007),w=t(9113),h=(0,l.aZ)({name:"login",setup(){const e=(0,f.oR)(),a=(0,g.tv)(),t=(0,p.qj)({activeKey:0,loading:!1,isLoginError:!1}),l=(0,p.qj)({rememberMe:!0,username:"",password:"",mobile:"",captcha:""}),r=(0,p.qj)({rememberMe:void 0,username:[{required:!0,message:"请输入帐户名"}],password:[{required:!0,message:"请输入密码"}],mobile:[{required:!0,pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号"}],captcha:[{required:!0,message:"请输入验证码"}]}),{validateInfos:o,validate:n,resetFields:s}=(0,v.Z)(l,r);return{...(0,p.BK)(t),form:l,validateInfos:o,handleTabClick:function(e){t.activeKey=e,s()},getCaptcha:async function(e){try{e.preventDefault(),await n("mobile")}catch(e){}},handleSubmit:async function(l){try{t.loading=!0,l.preventDefault();const r=0===t.activeKey?["username","password"]:["mobile","captcha"],o=await n(r);o.type=0===t.activeKey?"account":"telephone";const{token:s}=await w.Z.login(o),i=await w.Z.getUserInfo(),{name:u,userid:c,avatar:d}=i;await e.dispatch("setLoginStatus",1),await e.dispatch("setAccessToken",s);const m={username:c,nickname:u,avatar:d,extra:i};await e.dispatch("setUserInfo",m),await a.push({path:"/"}),t.loading=!1}catch(e){t.loading=!1}}}}});h.render=function(e,a,t,p,f,g){const v=(0,l.up)("a-alert"),w=(0,l.up)("user-outlined"),h=(0,l.up)("a-input"),b=(0,l.up)("a-form-item"),_=(0,l.up)("lock-outlined"),y=(0,l.up)("a-input-password"),k=(0,l.up)("a-tab-pane"),W=(0,l.up)("mobile-outlined"),U=(0,l.up)("mail-outlined"),q=(0,l.up)("a-col"),C=(0,l.up)("a-button"),I=(0,l.up)("a-row"),x=(0,l.up)("a-tabs"),Z=(0,l.up)("a-checkbox"),j=(0,l.up)("router-link"),z=(0,l.up)("alipay-circle-outlined"),K=(0,l.up)("taobao-circle-outlined"),F=(0,l.up)("weibo-circle-outlined"),S=(0,l.up)("a-form");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(S,{layout:"vertical",model:e.form,onSubmit:e.handleSubmit},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{"active-key":e.activeKey,"tab-bar-style":{textAlign:"center",borderBottom:"unset"},onChange:e.handleTabClick},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{key:0,tab:"账号密码登录"},{default:(0,l.w5)((()=>[e.isLoginError?((0,l.wg)(),(0,l.j4)(v,{key:0,type:"error","show-icon":"",style:{"margin-bottom":"24px"},message:"账户或密码错误"})):(0,l.kq)("",!0),(0,l.Wm)(b,(0,r.vs)((0,l.F4)(e.validateInfos.username)),{default:(0,l.w5)((()=>[(0,l.Wm)(h,{size:"large",value:e.form.username,"onUpdate:value":a[0]||(a[0]=a=>e.form.username=a),placeholder:"账户: admin"},{prefix:(0,l.w5)((()=>[(0,l.Wm)(w,{style:(0,r.j5)({color:"rgba(0,0,0,.25)"})},null,8,["style"])])),_:1},8,["value"])])),_:1},16),(0,l.Wm)(b,(0,r.vs)((0,l.F4)(e.validateInfos.password)),{default:(0,l.w5)((()=>[(0,l.Wm)(y,{size:"large",value:e.form.password,"onUpdate:value":a[1]||(a[1]=a=>e.form.password=a),placeholder:"密码: admin or ant.design"},{prefix:(0,l.w5)((()=>[(0,l.Wm)(_,{style:(0,r.j5)({color:"rgba(0,0,0,.25)"})},null,8,["style"])])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,l.Wm)(k,{key:1,tab:"手机号登录"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,(0,r.vs)((0,l.F4)(e.validateInfos.mobile)),{default:(0,l.w5)((()=>[(0,l.Wm)(h,{size:"large",value:e.form.mobile,"onUpdate:value":a[2]||(a[2]=a=>e.form.mobile=a),placeholder:"手机号"},{prefix:(0,l.w5)((()=>[(0,l.Wm)(W,{style:(0,r.j5)({color:"rgba(0,0,0,.25)"})},null,8,["style"])])),_:1},8,["value"])])),_:1},16),(0,l.Wm)(I,{gutter:16},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{span:16},{default:(0,l.w5)((()=>[(0,l.Wm)(b,(0,r.vs)((0,l.F4)(e.validateInfos.captcha)),{default:(0,l.w5)((()=>[(0,l.Wm)(h,{size:"large",value:e.form.captcha,"onUpdate:value":a[3]||(a[3]=a=>e.form.captcha=a),placeholder:"验证码"},{prefix:(0,l.w5)((()=>[(0,l.Wm)(U,{style:(0,r.j5)({color:"rgba(0,0,0,.25)"})},null,8,["style"])])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,l.Wm)(q,{span:8},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{size:"large",block:"",onClick:e.getCaptcha},{default:(0,l.w5)((()=>[n])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["active-key","onChange"]),(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{checked:e.form.rememberMe,"onUpdate:checked":a[4]||(a[4]=a=>e.form.rememberMe=a)},{default:(0,l.w5)((()=>[s])),_:1},8,["checked"]),(0,l.Wm)(j,{to:"/user/login",class:"forge-password",style:{float:"right"}},{default:(0,l.w5)((()=>[i])),_:1})])),_:1}),(0,l.Wm)(b,{style:{"margin-top":"24px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{size:"large",type:"primary",loading:e.loading,"html-type":"submit",block:""},{default:(0,l.w5)((()=>[u])),_:1},8,["loading"])])),_:1}),(0,l._)("div",c,[d,(0,l._)("a",null,[(0,l.Wm)(z,{class:"item-icon"})]),(0,l._)("a",null,[(0,l.Wm)(K,{class:"item-icon"})]),(0,l._)("a",null,[(0,l.Wm)(F,{class:"item-icon"})]),(0,l.Wm)(j,{class:"register",to:"/user/register"},{default:(0,l.w5)((()=>[m])),_:1})])])),_:1},8,["model","onSubmit"])])},h.__scopeId="data-v-14879de8";var b=h}}]);