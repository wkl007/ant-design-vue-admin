"use strict";(self.webpackChunkant_desing_vue_admin=self.webpackChunkant_desing_vue_admin||[]).push([[685],{9113:function(e,t,a){a.d(t,{Z:function(){return n}});var o=a(1046);class n{static login(e){return o.Z.request({url:"/login/account",method:"post",data:e})}static getUserInfo(){return o.Z.request({url:"/currentUser",method:"get"})}static logout(){return o.Z.request({url:"/logout",method:"post"})}static register(e){return o.Z.request({url:"/register",method:"post",data:e})}}},318:function(e,t,a){a.r(t),a.d(t,{default:function(){return T}});var o=a(6252),n=a(3577);const s=e=>((0,o.dD)("data-v-eac5fbf2"),e=e(),(0,o.Cn)(),e),r={class:"main register"},l=s((()=>(0,o._)("h3",null,"注册",-1))),i={style:{width:"240px"}},c=s((()=>(0,o._)("div",{style:{"margin-top":"10px"}},[(0,o._)("span",null,"请至少输入 6 个字符。建议输入字母、数字、特殊字符组合。")],-1))),u=(0,o.Uk)("+86"),d=(0,o.Uk)("+87"),p=(0,o.Uk)(" 注册 "),m=(0,o.Uk)(" 使用已有账户登录 ");a(4287);var f=a(9299),v=a(8376),g=a(2185),w=a(3765),h=a(2548),b=a(9293),_=a(9751),W={},C=4.5,y="24px",k="24px",Z="topRight",x=function(){return document.body},I=null;function L(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;switch(e){case"topLeft":t={left:"0px",top:a,bottom:"auto"};break;case"topRight":t={right:"0px",top:a,bottom:"auto"};break;case"bottomLeft":t={left:"0px",top:"auto",bottom:o};break;default:t={right:"0px",top:"auto",bottom:o}}return t}var q={success:g.Z,info:w.Z,error:h.Z,warning:b.Z};var U={open:function(e){var t=e.icon,a=e.type,n=e.description,s=e.message,r=e.btn,l=e.prefixCls||"ant-notification",i="".concat(l,"-notice"),c=void 0===e.duration?C:e.duration,u=null;if(t)u=function(){return(0,o.Wm)("span",{class:"".concat(i,"-icon")},[t])};else if(a){var d=q[a];u=function(){return(0,o.Wm)(d,{class:"".concat(i,"-icon ").concat(i,"-icon-").concat(a)},null)}}!function(e,t){var a=e.prefixCls,n=e.placement,s=void 0===n?Z:n,r=e.getContainer,l=void 0===r?x:r,i=e.top,c=e.bottom,u=e.closeIcon,d=void 0===u?I:u,p="".concat(a,"-").concat(s);W[p]?t(W[p]):v.Z.newInstance({prefixCls:a,class:"".concat(a,"-").concat(s),style:L(s,i,c),getContainer:l,closeIcon:function(){return(0,o.Wm)("span",{class:"".concat(a,"-close-x")},[d||(0,o.Wm)(_.Z,{class:"".concat(a,"-close-icon")},null)])}},(function(e){W[p]=e,t(e)}))}({prefixCls:l,placement:e.placement,top:e.top,bottom:e.bottom,getContainer:e.getContainer,closeIcon:e.closeIcon},(function(t){t.notice({content:function(){return(0,o.Wm)("div",{class:u?"".concat(i,"-with-icon"):""},[u&&u(),(0,o.Wm)("div",{class:"".concat(i,"-message")},[!n&&u?(0,o.Wm)("span",{class:"".concat(i,"-message-single-line-auto-margin")},null):null,s]),(0,o.Wm)("div",{class:"".concat(i,"-description")},[n]),r?(0,o.Wm)("span",{class:"".concat(i,"-btn")},[r]):null])},duration:c,closable:!0,onClose:e.onClose,onClick:e.onClick,key:e.key,style:e.style||{},class:e.class})}))},close:function(e){Object.keys(W).forEach((function(t){return W[t].removeNotice(e)}))},config:function(e){var t=e.duration,a=e.placement,o=e.bottom,n=e.top,s=e.getContainer,r=e.closeIcon;void 0!==t&&(C=t),void 0!==a&&(Z=a),void 0!==o&&(k="number"==typeof o?"".concat(o,"px"):o),void 0!==n&&(y="number"==typeof n?"".concat(n,"px"):n),void 0!==s&&(x=s),void 0!==r&&(I=r)},destroy:function(){Object.keys(W).forEach((function(e){W[e].destroy(),delete W[e]}))}},z=U;["success","info","warning","error"].forEach((function(e){z[e]=function(t){return z.open((0,f.Z)((0,f.Z)({},t),{type:e}))}})),z.warn=z.warning;var B=z,F=(a(586),a(1446)),S=a(2262),E=a(6007),P=a(2119),j=a(9113),D=a(1046);const R={0:"低",1:"低",2:"中",3:"强"},N={0:"error",1:"error",2:"warning",3:"success"},$={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"};let A;var O=(0,o.aZ)({name:"Register",setup(){const e=(0,P.tv)(),t=(0,S.qj)({time:60,smsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000",registerBtn:!1}),a=(0,S.qj)({email:"",password:"",confirmPassword:"",mobile:"",captcha:""}),o=(0,S.qj)({email:[{required:!0,type:"email",message:"请输入邮箱地址"}],password:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,a)=>new Promise(((e,o)=>{let n=0;/[0-9]/.test(a)&&n++,/[a-zA-Z]/.test(a)&&n++,/[^0-9a-zA-Z_]/.test(a)&&n++,t.passwordLevel=n,t.percent=30*n,n>=2?(n>=3&&(t.percent=100),e(null)):(0===n&&(t.percent=10),o(new Error("密码强度不够")))}))}],confirmPassword:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,t)=>new Promise(((e,o)=>{const n=a.password;t||o(new Error("请输入密码")),t&&n&&t.trim()!==n.trim()&&o(new Error("两次密码不一致")),e(null)}))}],mobile:[{required:!0,message:"请输入正确的手机号",pattern:/^1[3456789]\d{9}$/}],captcha:[{required:!0,message:"请输入验证码"}]}),{validateInfos:n,validate:s}=(0,E.Z)(a,o);return{...(0,S.BK)(t),form:a,validateInfos:n,passwordLevelClass:(0,S.Fl)((()=>N[t.passwordLevel])),passwordLevelName:(0,S.Fl)((()=>R[t.passwordLevel])),passwordLevelColor:(0,S.Fl)((()=>$[t.passwordLevel])),getCaptcha:async function(e){try{e.preventDefault();const{mobile:a}=await s("mobile");A=setInterval((()=>{t.time--<=0&&(t.time=60,t.smsSendBtn=!1,clearInterval(A))}),1e3);const o=F.Z.loading("验证码发送中...",0),{captcha:n}=await class{static getSmsCaptcha(e){return D.Z.request({url:"/message/sms",method:"get",params:e})}}.getSmsCaptcha({mobile:a});setTimeout(o,3e3),B.success({message:"提示",description:`验证码获取成功，您的验证码为：${n}`,duration:8})}catch(e){F.Z.destroy(),clearInterval(A),t.time=60,t.smsSendBtn=!1}},handleSubmit:async function(a){try{a.preventDefault(),t.registerBtn=!0;const o=await s(),{data:{email:n}}=await j.Z.register(o);F.Z.info("注册成功"),await e.push({path:"/user/registerResult",query:{email:n}})}catch(a){t.registerBtn=!1}}}}});var T=(0,a(3744).Z)(O,[["render",function(e,t,a,s,f,v){const g=(0,o.up)("a-input"),w=(0,o.up)("a-form-item"),h=(0,o.up)("a-progress"),b=(0,o.up)("a-input-password"),_=(0,o.up)("a-popover"),W=(0,o.up)("a-select-option"),C=(0,o.up)("a-select"),y=(0,o.up)("mail-outlined"),k=(0,o.up)("a-col"),Z=(0,o.up)("a-button"),x=(0,o.up)("a-row"),I=(0,o.up)("router-link"),L=(0,o.up)("a-form");return(0,o.wg)(),(0,o.iD)("div",r,[l,(0,o.Wm)(L,{layout:"vertical",model:e.form,onSubmit:e.handleSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.email)),{default:(0,o.w5)((()=>[(0,o.Wm)(g,{size:"large",placeholder:"邮箱",value:e.form.email,"onUpdate:value":t[0]||(t[0]=t=>e.form.email=t)},null,8,["value"])])),_:1},16),(0,o.Wm)(_,{placement:"rightTop",trigger:"focus","get-popup-container":e=>e.parentElement,visible:e.passwordLevelChecked,"onUpdate:visible":t[3]||(t[3]=t=>e.passwordLevelChecked=t)},{content:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o._)("div",{class:(0,n.C_)(e.passwordLevelClass)}," 强度："+(0,n.zw)(e.passwordLevelName),3),(0,o.Wm)(h,{percent:e.percent,"show-info":!1,"stroke-color":e.passwordLevelColor},null,8,["percent","stroke-color"]),c])])),default:(0,o.w5)((()=>[(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.password)),{default:(0,o.w5)((()=>[(0,o.Wm)(b,{size:"large",placeholder:"至少6位密码，区分大小写",value:e.form.password,"onUpdate:value":t[1]||(t[1]=t=>e.form.password=t),onFocus:t[2]||(t[2]=t=>e.passwordLevelChecked=!0)},null,8,["value"])])),_:1},16)])),_:1},8,["get-popup-container","visible"]),(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.confirmPassword)),{default:(0,o.w5)((()=>[(0,o.Wm)(b,{size:"large",placeholder:"确认密码",value:e.form.confirmPassword,"onUpdate:value":t[4]||(t[4]=t=>e.form.confirmPassword=t)},null,8,["value"])])),_:1},16),(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.mobile)),{default:(0,o.w5)((()=>[(0,o.Wm)(g,{size:"large",placeholder:"11 位手机号",value:e.form.mobile,"onUpdate:value":t[5]||(t[5]=t=>e.form.mobile=t)},{addonBefore:(0,o.w5)((()=>[(0,o.Wm)(C,{size:"large","default-value":"+86"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{value:"+86"},{default:(0,o.w5)((()=>[u])),_:1}),(0,o.Wm)(W,{value:"+87"},{default:(0,o.w5)((()=>[d])),_:1})])),_:1})])),_:1},8,["value"])])),_:1},16),(0,o.Wm)(x,{gutter:16},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{span:16},{default:(0,o.w5)((()=>[(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.captcha)),{default:(0,o.w5)((()=>[(0,o.Wm)(g,{size:"large",placeholder:"验证码",value:e.form.captcha,"onUpdate:value":t[6]||(t[6]=t=>e.form.captcha=t)},{prefix:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"prefix-icon"})])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,o.Wm)(k,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{size:"large",block:"",onClick:e.getCaptcha},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.smsSendBtn?`${e.time} s`:"获取验证码"),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{size:"large",type:"primary",loading:e.registerBtn,disabled:e.registerBtn,"html-type":"submit",style:{width:"50%"}},{default:(0,o.w5)((()=>[p])),_:1},8,["loading","disabled"]),(0,o.Wm)(I,{class:"login",to:"/user/login",style:{float:"right","line-height":"40px"}},{default:(0,o.w5)((()=>[m])),_:1})])),_:1})])),_:1},8,["model","onSubmit"])])}],["__scopeId","data-v-eac5fbf2"]])}}]);