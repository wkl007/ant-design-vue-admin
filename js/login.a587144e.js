(self.webpackChunkant_desing_vue_admin=self.webpackChunkant_desing_vue_admin||[]).push([[535],{5518:function(e,t,a){"use strict";a.d(t,{cI:function(){return S}});var r=a(2262),n=a(6252),i=a(2151),o=a(758),l=a(1597),u=a(665),c=a(2563),s=a(4827),d=a(6273),f=Math.min;var m=function(e,t,a){for(var r=a?c.Z:u.Z,n=e[0].length,i=e.length,m=i,v=Array(i),p=1/0,g=[];m--;){var h=e[m];m&&t&&(h=(0,o.Z)(h,(0,s.Z)(t))),p=f(h.length,p),v[m]=!a&&(t||n>=120&&h.length>=120)?new l.Z(m&&h):void 0}h=e[0];var b=-1,y=v[0];e:for(;++b<n&&g.length<p;){var k=h[b],w=t?t(k):k;if(k=a||0!==k?k:0,!(y?(0,d.Z)(y,w):r(g,w,a))){for(m=i;--m;){var W=v[m];if(!(W?(0,d.Z)(W,w):r(e[m],w,a)))continue e}y&&y.push(w),g.push(k)}}return g},v=a(8901),p=a(4096);var g=function(e){return(0,p.Z)(e)?e:[]},h=(0,v.Z)((function(e){var t=(0,o.Z)(e,g);return t.length&&t[0]===e[0]?m(t):[]})),b=a(5741),y=a(6152),k=a(7186),w=a(8688),W=a(144),_=a(7493);function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){j(e,t,a[t])}))}return e}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function q(e){var t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t}function I(e){return null==e?[]:Array.isArray(e)?e:[e]}(0,a(6236).bc)("","success","warning","error","validating");function U(e,t,a){for(var r=e,n=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0,o=n.length;i<o-1&&(r||a);++i){var l=n[i];if(!(l in r)){if(a)throw new Error("please transfer a valid name path to validate!");break}r=r[l]}return{o:r,k:n[i],v:r?r[n[i]]:null,isValid:r&&n[i]in r}}var S=function(e,t,a){var o=(0,i.Z)(e),l={};Object.keys(t).forEach((function(e){l[e]={autoLink:!1,required:q(t[e])}})),l=(0,r.qj)(l);var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.length?e.filter((function(e){var a=I(e.trigger||"change");return h(a,t).length})):e},c=null,s=function(e,t,a,r){var n=(0,w.N)([e],t,a,Z({validateMessages:W.y},r),!!r.validateFirst);return l[e].validateStatus="validating",n.catch((function(e){return e})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"validating"===l[e].validateStatus&&(l[e].validateStatus=t.length?"error":"success",l[e].help=t[0])})),n},d=function(a,r){var n=[],i=!0;a?n=Array.isArray(a)?a:[a]:(i=!1,n=Object.keys(t));var o=function(a){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=[],o={},l=function(l){var c=a[l],d=U(e,c,n);if(!d.isValid)return"continue";o[c]=d.v;var f=u(t[c],I(r&&r.trigger));f.length&&i.push(s(c,d.v,f,r||{}).then((function(){return{name:c,errors:[]}})).catch((function(e){return Promise.reject({name:c,errors:e})})))},d=0;d<a.length;d++)l(d);var f=(0,_.v)(i);c=f;var m=f.then((function(){return c===f?Promise.resolve(o):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:o,errorFields:t,outOfDate:c!==f})}));return m.catch((function(e){return e})),m}(n,r||{},i);return o.catch((function(e){return e})),o},f=o,m=function(e){var a=[];Object.keys(t).forEach((function(t){var r=U(e,t,!1),n=U(f,t,!1);(0,b.Z)(r.v,n.v)||a.push(t)})),d(a,{trigger:"change"}),f=(0,i.Z)(e)},v=null==a?void 0:a.debounce;return(0,n.YP)(e,v&&v.wait?(0,y.Z)(m,v.wait,(0,k.Z)(v,["wait"])):m,{immediate:a&&!!a.immediate,deep:!0}),(0,n.YP)(t,(function(){a&&a.validateOnRuleChange&&d()}),{deep:!0}),{modelRef:e,rulesRef:t,initialModel:o,validateInfos:l,resetFields:function(a){O(e,Z({},(0,i.Z)(o),a)),(0,n.Y3)((function(){Object.keys(l).forEach((function(e){l[e]={autoLink:!1,required:q(t[e])}}))}))},validate:d,validateField:s,mergeValidateInfo:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={autoLink:!1},a=[],r=Array.isArray(e)?e:[e],n=0;n<r.length;n++){var i=r[n];"error"===(null==i?void 0:i.validateStatus)&&(t.validateStatus="error",i.help&&a.push(i.help)),t.required=t.required||(null==i?void 0:i.required)}return t.help=a.join("\n"),t},clearValidate:function(e){(e?Array.isArray(e)?e:[e]:Object.keys(t)).forEach((function(e){l[e]&&O(l[e],{validateStatus:"",help:""})}))}}};a(1033)},3796:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(707);class n{static login(e){return r.Z.request({url:"/login/account",method:"post",data:e})}static getUserInfo(){return r.Z.request({url:"/currentUser",method:"get"})}static logout(){return r.Z.request({url:"/logout",method:"post"})}static register(e){return r.Z.request({url:"/register",method:"post",data:e})}}},9813:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var r=a(6252);const n=(0,r.HX)("data-v-2143c238");(0,r.dD)("data-v-2143c238");const i={class:"main login"},o=(0,r.Uk)(" 获取验证码 "),l=(0,r.Uk)(" 自动登录 "),u=(0,r.Uk)(" 忘记密码 "),c=(0,r.Uk)(" 登录 "),s={class:"user-login-other"},d=(0,r.Wm)("span",null,"其他登录方式",-1),f=(0,r.Uk)(" 注册账户 ");(0,r.Cn)();const m=n(((e,t,a,m,v,p)=>{const g=(0,r.up)("a-alert"),h=(0,r.up)("user-outlined"),b=(0,r.up)("a-input"),y=(0,r.up)("a-form-item"),k=(0,r.up)("lock-outlined"),w=(0,r.up)("a-input-password"),W=(0,r.up)("a-tab-pane"),_=(0,r.up)("mobile-outlined"),Z=(0,r.up)("mail-outlined"),j=(0,r.up)("a-col"),O=(0,r.up)("a-button"),q=(0,r.up)("a-row"),I=(0,r.up)("a-tabs"),U=(0,r.up)("a-checkbox"),S=(0,r.up)("router-link"),C=(0,r.up)("alipay-circle-outlined"),A=(0,r.up)("taobao-circle-outlined"),P=(0,r.up)("weibo-circle-outlined"),x=(0,r.up)("a-form");return(0,r.wg)(),(0,r.j4)("div",i,[(0,r.Wm)(x,{layout:"vertical",model:e.form,onSubmit:e.handleSubmit},{default:n((()=>[(0,r.Wm)(I,{"active-key":e.activeKey,"tab-bar-style":{textAlign:"center",borderBottom:"unset"},onChange:e.handleTabClick},{default:n((()=>[(0,r.Wm)(W,{key:0,tab:"账号密码登录"},{default:n((()=>[e.isLoginError?((0,r.wg)(),(0,r.j4)(g,{key:0,type:"error","show-icon":"",style:{"margin-bottom":"24px"},message:"账户或密码错误"})):(0,r.ry)("",!0),(0,r.Wm)(y,e.validateInfos.username,{default:n((()=>[(0,r.Wm)(b,{size:"large",value:e.form.username,"onUpdate:value":t[1]||(t[1]=t=>e.form.username=t),placeholder:"账户: admin"},{prefix:n((()=>[(0,r.Wm)(h,{style:{color:"rgba(0,0,0,.25)"}},null,8,["style"])])),_:1},8,["value"])])),_:1},16),(0,r.Wm)(y,e.validateInfos.password,{default:n((()=>[(0,r.Wm)(w,{size:"large",value:e.form.password,"onUpdate:value":t[2]||(t[2]=t=>e.form.password=t),placeholder:"密码: admin or ant.design"},{prefix:n((()=>[(0,r.Wm)(k,{style:{color:"rgba(0,0,0,.25)"}},null,8,["style"])])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,r.Wm)(W,{key:1,tab:"手机号登录"},{default:n((()=>[(0,r.Wm)(y,e.validateInfos.mobile,{default:n((()=>[(0,r.Wm)(b,{size:"large",value:e.form.mobile,"onUpdate:value":t[3]||(t[3]=t=>e.form.mobile=t),placeholder:"手机号"},{prefix:n((()=>[(0,r.Wm)(_,{style:{color:"rgba(0,0,0,.25)"}},null,8,["style"])])),_:1},8,["value"])])),_:1},16),(0,r.Wm)(q,{gutter:16},{default:n((()=>[(0,r.Wm)(j,{span:16},{default:n((()=>[(0,r.Wm)(y,e.validateInfos.captcha,{default:n((()=>[(0,r.Wm)(b,{size:"large",value:e.form.captcha,"onUpdate:value":t[4]||(t[4]=t=>e.form.captcha=t),placeholder:"验证码"},{prefix:n((()=>[(0,r.Wm)(Z,{style:{color:"rgba(0,0,0,.25)"}},null,8,["style"])])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,r.Wm)(j,{span:8},{default:n((()=>[(0,r.Wm)(O,{size:"large",block:"",onClick:e.getCaptcha},{default:n((()=>[o])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["active-key","onChange"]),(0,r.Wm)(y,null,{default:n((()=>[(0,r.Wm)(U,{checked:e.form.rememberMe,"onUpdate:checked":t[5]||(t[5]=t=>e.form.rememberMe=t)},{default:n((()=>[l])),_:1},8,["checked"]),(0,r.Wm)(S,{to:"/user/login",class:"forge-password",style:{float:"right"}},{default:n((()=>[u])),_:1})])),_:1}),(0,r.Wm)(y,{style:{"margin-top":"24px"}},{default:n((()=>[(0,r.Wm)(O,{size:"large",type:"primary",loading:e.loading,"html-type":"submit",block:""},{default:n((()=>[c])),_:1},8,["loading"])])),_:1}),(0,r.Wm)("div",s,[d,(0,r.Wm)("a",null,[(0,r.Wm)(C,{class:"item-icon"})]),(0,r.Wm)("a",null,[(0,r.Wm)(A,{class:"item-icon"})]),(0,r.Wm)("a",null,[(0,r.Wm)(P,{class:"item-icon"})]),(0,r.Wm)(S,{class:"register",to:"/user/register"},{default:n((()=>[f])),_:1})])])),_:1},8,["model","onSubmit"])])}));var v=a(2262),p=a(4709),g=a(2119),h=a(5518),b=a(3796),y=(0,r.aZ)({name:"login",setup(){const e=(0,p.oR)(),t=(0,g.tv)(),a=(0,v.qj)({activeKey:0,loading:!1,isLoginError:!1}),r=(0,v.qj)({rememberMe:!0,username:"",password:"",mobile:"",captcha:""}),n=(0,v.qj)({rememberMe:void 0,username:[{required:!0,message:"请输入帐户名"}],password:[{required:!0,message:"请输入密码"}],mobile:[{required:!0,pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号"}],captcha:[{required:!0,message:"请输入验证码"}]}),{validateInfos:i,validate:o,resetFields:l}=(0,h.cI)(r,n);return{...(0,v.BK)(a),form:r,validateInfos:i,handleTabClick:function(e){a.activeKey=e,l()},getCaptcha:async function(e){try{e.preventDefault(),await o("mobile")}catch(e){}},handleSubmit:async function(r){try{a.loading=!0,r.preventDefault();const n=0===a.activeKey?["username","password"]:["mobile","captcha"],i=await o(n);i.type=0===a.activeKey?"account":"telephone";const{token:l}=await b.Z.login(i),u=await b.Z.getUserInfo(),{name:c,userid:s,avatar:d}=u;await e.dispatch("setLoginStatus",1),await e.dispatch("setAccessToken",l);const f={username:s,nickname:c,avatar:d,extra:u};await e.dispatch("setUserInfo",f),await t.push({path:"/"}),a.loading=!1}catch(e){a.loading=!1}}}}});y.render=m,y.__scopeId="data-v-2143c238";var k=y}}]);