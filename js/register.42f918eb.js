(self.webpackChunkant_desing_vue_admin=self.webpackChunkant_desing_vue_admin||[]).push([[685],{5518:function(e,t,r){"use strict";r.d(t,{cI:function(){return L}});var n=r(2262),a=r(6252),o=r(2151),i=r(758),l=r(1597),s=r(665),c=r(2563),u=r(4827),d=r(6273),f=Math.min;var p=function(e,t,r){for(var n=r?c.Z:s.Z,a=e[0].length,o=e.length,p=o,v=Array(o),m=1/0,g=[];p--;){var h=e[p];p&&t&&(h=(0,i.Z)(h,(0,u.Z)(t))),m=f(h.length,m),v[p]=!r&&(t||a>=120&&h.length>=120)?new l.Z(p&&h):void 0}h=e[0];var w=-1,b=v[0];e:for(;++w<a&&g.length<m;){var y=h[w],k=t?t(y):y;if(y=r||0!==y?y:0,!(b?(0,d.Z)(b,k):n(g,k,r))){for(p=o;--p;){var W=v[p];if(!(W?(0,d.Z)(W,k):n(e[p],k,r)))continue e}b&&b.push(k),g.push(y)}}return g},v=r(8901),m=r(4096);var g=function(e){return(0,m.Z)(e)?e:[]},h=(0,v.Z)((function(e){var t=(0,i.Z)(e,g);return t.length&&t[0]===e[0]?p(t):[]})),w=r(5741),b=r(6152),y=r(7186),k=r(8688),W=r(144),Z=r(7493);function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_(e,t,r[t])}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function O(e){var t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t}function I(e){return null==e?[]:Array.isArray(e)?e:[e]}(0,r(6236).bc)("","success","warning","error","validating");function q(e,t,r){for(var n=e,a=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),o=0,i=a.length;o<i-1&&(n||r);++o){var l=a[o];if(!(l in n)){if(r)throw new Error("please transfer a valid name path to validate!");break}n=n[l]}return{o:n,k:a[o],v:n?n[a[o]]:null,isValid:n&&a[o]in n}}var L=function(e,t,r){var i=(0,o.Z)(e),l={};Object.keys(t).forEach((function(e){l[e]={autoLink:!1,required:O(t[e])}})),l=(0,n.qj)(l);var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.length?e.filter((function(e){var r=I(e.trigger||"change");return h(r,t).length})):e},c=null,u=function(e,t,r,n){var a=(0,k.N)([e],t,r,C({validateMessages:W.y},n),!!n.validateFirst);return l[e].validateStatus="validating",a.catch((function(e){return e})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"validating"===l[e].validateStatus&&(l[e].validateStatus=t.length?"error":"success",l[e].help=t[0])})),a},d=function(r,n){var a=[],o=!0;r?a=Array.isArray(r)?r:[r]:(o=!1,a=Object.keys(t));var i=function(r){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=[],i={},l=function(l){var c=r[l],d=q(e,c,a);if(!d.isValid)return"continue";i[c]=d.v;var f=s(t[c],I(n&&n.trigger));f.length&&o.push(u(c,d.v,f,n||{}).then((function(){return{name:c,errors:[]}})).catch((function(e){return Promise.reject({name:c,errors:e})})))},d=0;d<r.length;d++)l(d);var f=(0,Z.v)(o);c=f;var p=f.then((function(){return c===f?Promise.resolve(i):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:i,errorFields:t,outOfDate:c!==f})}));return p.catch((function(e){return e})),p}(a,n||{},o);return i.catch((function(e){return e})),i},f=i,p=function(e){var r=[];Object.keys(t).forEach((function(t){var n=q(e,t,!1),a=q(f,t,!1);(0,w.Z)(n.v,a.v)||r.push(t)})),d(r,{trigger:"change"}),f=(0,o.Z)(e)},v=null==r?void 0:r.debounce;return(0,a.YP)(e,v&&v.wait?(0,b.Z)(p,v.wait,(0,y.Z)(v,["wait"])):p,{immediate:r&&!!r.immediate,deep:!0}),(0,a.YP)(t,(function(){r&&r.validateOnRuleChange&&d()}),{deep:!0}),{modelRef:e,rulesRef:t,initialModel:i,validateInfos:l,resetFields:function(r){j(e,C({},(0,o.Z)(i),r)),(0,a.Y3)((function(){Object.keys(l).forEach((function(e){l[e]={autoLink:!1,required:O(t[e])}}))}))},validate:d,validateField:u,mergeValidateInfo:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={autoLink:!1},r=[],n=Array.isArray(e)?e:[e],a=0;a<n.length;a++){var o=n[a];"error"===(null==o?void 0:o.validateStatus)&&(t.validateStatus="error",o.help&&r.push(o.help)),t.required=t.required||(null==o?void 0:o.required)}return t.help=r.join("\n"),t},clearValidate:function(e){(e?Array.isArray(e)?e:[e]:Object.keys(t)).forEach((function(e){l[e]&&j(l[e],{validateStatus:"",help:""})}))}}};r(1033)},3796:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(707);class a{static login(e){return n.Z.request({url:"/login/account",method:"post",data:e})}static getUserInfo(){return n.Z.request({url:"/currentUser",method:"get"})}static logout(){return n.Z.request({url:"/logout",method:"post"})}static register(e){return n.Z.request({url:"/register",method:"post",data:e})}}},8242:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return $}});var n=r(6252),a=r(3577);const o=(0,n.HX)("data-v-39e1223d");(0,n.dD)("data-v-39e1223d");const i={class:"main register"},l=(0,n.Wm)("h3",null,"注册",-1),s={style:{width:"240px"}},c=(0,n.Wm)("div",{style:{"margin-top":"10px"}},[(0,n.Wm)("span",null,"请至少输入 6 个字符。建议输入字母、数字、特殊字符组合。")],-1),u=(0,n.Uk)("+86"),d=(0,n.Uk)("+87"),f=(0,n.Uk)(" 注册 "),p=(0,n.Uk)(" 使用已有账户登录 ");(0,n.Cn)();const v=o(((e,t,r,v,m,g)=>{const h=(0,n.up)("a-input"),w=(0,n.up)("a-form-item"),b=(0,n.up)("a-progress"),y=(0,n.up)("a-input-password"),k=(0,n.up)("a-popover"),W=(0,n.up)("a-select-option"),Z=(0,n.up)("a-select"),C=(0,n.up)("mail-outlined"),_=(0,n.up)("a-col"),j=(0,n.up)("a-button"),O=(0,n.up)("a-row"),I=(0,n.up)("router-link"),q=(0,n.up)("a-form");return(0,n.wg)(),(0,n.j4)("div",i,[l,(0,n.Wm)(q,{layout:"vertical",model:e.form,onSubmit:e.handleSubmit},{default:o((()=>[(0,n.Wm)(w,e.validateInfos.email,{default:o((()=>[(0,n.Wm)(h,{size:"large",placeholder:"邮箱",value:e.form.email,"onUpdate:value":t[1]||(t[1]=t=>e.form.email=t)},null,8,["value"])])),_:1},16),(0,n.Wm)(k,{placement:"rightTop",trigger:"focus","get-popup-container":e=>e.parentElement,visible:e.passwordLevelChecked,"onUpdate:visible":t[4]||(t[4]=t=>e.passwordLevelChecked=t)},{content:o((()=>[(0,n.Wm)("div",s,[(0,n.Wm)("div",{class:e.passwordLevelClass}," 强度："+(0,a.zw)(e.passwordLevelName),3),(0,n.Wm)(b,{percent:e.percent,"show-info":!1,"stroke-color":e.passwordLevelColor},null,8,["percent","stroke-color"]),c])])),default:o((()=>[(0,n.Wm)(w,e.validateInfos.password,{default:o((()=>[(0,n.Wm)(y,{size:"large",placeholder:"至少6位密码，区分大小写",value:e.form.password,"onUpdate:value":t[2]||(t[2]=t=>e.form.password=t),onFocus:t[3]||(t[3]=t=>e.passwordLevelChecked=!0)},null,8,["value"])])),_:1},16)])),_:1},8,["get-popup-container","visible"]),(0,n.Wm)(w,e.validateInfos.confirmPassword,{default:o((()=>[(0,n.Wm)(y,{size:"large",placeholder:"确认密码",value:e.form.confirmPassword,"onUpdate:value":t[5]||(t[5]=t=>e.form.confirmPassword=t)},null,8,["value"])])),_:1},16),(0,n.Wm)(w,e.validateInfos.mobile,{default:o((()=>[(0,n.Wm)(h,{size:"large",placeholder:"11 位手机号",value:e.form.mobile,"onUpdate:value":t[6]||(t[6]=t=>e.form.mobile=t)},{addonBefore:o((()=>[(0,n.Wm)(Z,{size:"large","default-value":"+86"},{default:o((()=>[(0,n.Wm)(W,{value:"+86"},{default:o((()=>[u])),_:1}),(0,n.Wm)(W,{value:"+87"},{default:o((()=>[d])),_:1})])),_:1})])),_:1},8,["value"])])),_:1},16),(0,n.Wm)(O,{gutter:16},{default:o((()=>[(0,n.Wm)(_,{span:16},{default:o((()=>[(0,n.Wm)(w,e.validateInfos.captcha,{default:o((()=>[(0,n.Wm)(h,{size:"large",placeholder:"验证码",value:e.form.captcha,"onUpdate:value":t[7]||(t[7]=t=>e.form.captcha=t)},{prefix:o((()=>[(0,n.Wm)(C,{class:"prefix-icon"})])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,n.Wm)(_,{span:8},{default:o((()=>[(0,n.Wm)(j,{size:"large",block:"",onClick:e.getCaptcha},{default:o((()=>[(0,n.Uk)((0,a.zw)(e.smsSendBtn?`${e.time} s`:"获取验证码"),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,n.Wm)(w,null,{default:o((()=>[(0,n.Wm)(j,{size:"large",type:"primary",loading:e.registerBtn,disabled:e.registerBtn,"html-type":"submit",style:{width:"50%"}},{default:o((()=>[f])),_:1},8,["loading","disabled"]),(0,n.Wm)(I,{class:"login",to:"/user/login",style:{float:"right","line-height":"40px"}},{default:o((()=>[p])),_:1})])),_:1})])),_:1},8,["model","onSubmit"])])}));r(5900);var m=r(8376),g=r(2185),h=r(3765),w=r(2548),b=r(9293),y=r(9751);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var W={},Z=4.5,C="24px",_="24px",j="topRight",O=function(){return document.body},I=null;function q(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;switch(e){case"topLeft":t={left:"0px",top:r,bottom:"auto"};break;case"topRight":t={right:"0px",top:r,bottom:"auto"};break;case"bottomLeft":t={left:"0px",top:"auto",bottom:n};break;default:t={right:"0px",top:"auto",bottom:n}}return t}var L={success:g.Z,info:h.Z,error:w.Z,warning:b.Z};var P={open:function(e){var t=e.icon,r=e.type,a=e.description,o=e.message,i=e.btn,l=e.prefixCls||"ant-notification",s="".concat(l,"-notice"),c=void 0===e.duration?Z:e.duration,u=null;if(t)u=function(){return(0,n.Wm)("span",{class:"".concat(s,"-icon")},[t])};else if(r){var d=L[r];u=function(){return(0,n.Wm)(d,{class:"".concat(s,"-icon ").concat(s,"-icon-").concat(r)},null)}}!function(e,t){var r=e.prefixCls,a=e.placement,o=void 0===a?j:a,i=e.getContainer,l=void 0===i?O:i,s=e.top,c=e.bottom,u=e.closeIcon,d=void 0===u?I:u,f="".concat(r,"-").concat(o);W[f]?t(W[f]):m.Z.newInstance({prefixCls:r,class:"".concat(r,"-").concat(o),style:q(o,s,c),getContainer:l,closeIcon:function(){return(0,n.Wm)("span",{class:"".concat(r,"-close-x")},[d||(0,n.Wm)(y.Z,{class:"".concat(r,"-close-icon")},null)])}},(function(e){W[f]=e,t(e)}))}({prefixCls:l,placement:e.placement,top:e.top,bottom:e.bottom,getContainer:e.getContainer,closeIcon:e.closeIcon},(function(t){t.notice({content:function(){return(0,n.Wm)("div",{class:u?"".concat(s,"-with-icon"):""},[u&&u(),(0,n.Wm)("div",{class:"".concat(s,"-message")},[!a&&u?(0,n.Wm)("span",{class:"".concat(s,"-message-single-line-auto-margin")},null):null,o]),(0,n.Wm)("div",{class:"".concat(s,"-description")},[a]),i?(0,n.Wm)("span",{class:"".concat(s,"-btn")},[i]):null])},duration:c,closable:!0,onClose:e.onClose,onClick:e.onClick,key:e.key,style:e.style||{},class:e.class})}))},close:function(e){Object.keys(W).forEach((function(t){return W[t].removeNotice(e)}))},config:function(e){var t=e.duration,r=e.placement,n=e.bottom,a=e.top,o=e.getContainer,i=e.closeIcon;void 0!==t&&(Z=t),void 0!==r&&(j=r),void 0!==n&&(_="number"==typeof n?"".concat(n,"px"):n),void 0!==a&&(C="number"==typeof a?"".concat(a,"px"):a),void 0!==o&&(O=o),void 0!==i&&(I=i)},destroy:function(){Object.keys(W).forEach((function(e){W[e].destroy(),delete W[e]}))}};["success","info","warning","error"].forEach((function(e){P[e]=function(t){return P.open(k(k({},t),{type:e}))}})),P.warn=P.warning;var x=P,S=(r(1784),r(1446)),E=r(2262),U=r(5518),z=r(2119),A=r(3796),B=r(707);const F={0:"低",1:"低",2:"中",3:"强"},R={0:"error",1:"error",2:"warning",3:"success"},D={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"};let N;var V=(0,n.aZ)({name:"Register",setup(){const e=(0,z.tv)(),t=(0,E.qj)({time:60,smsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000",registerBtn:!1}),r=(0,E.qj)({email:"",password:"",confirmPassword:"",mobile:"",captcha:""}),a=(0,E.qj)({email:[{required:!0,type:"email",message:"请输入邮箱地址"}],password:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,r)=>new Promise(((e,n)=>{let a=0;/[0-9]/.test(r)&&a++,/[a-zA-Z]/.test(r)&&a++,/[^0-9a-zA-Z_]/.test(r)&&a++,t.passwordLevel=a,t.percent=30*a,a>=2?(a>=3&&(t.percent=100),e(null)):(0===a&&(t.percent=10),n(new Error("密码强度不够")))}))}],confirmPassword:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,t)=>new Promise(((e,n)=>{const a=r.password;t||n(new Error("请输入密码")),t&&a&&t.trim()!==a.trim()&&n(new Error("两次密码不一致")),e(null)}))}],mobile:[{required:!0,message:"请输入正确的手机号",pattern:/^1[3456789]\d{9}$/}],captcha:[{required:!0,message:"请输入验证码"}]}),{validateInfos:o,validate:i}=(0,U.cI)(r,a);return{...(0,E.BK)(t),form:r,validateInfos:o,passwordLevelClass:(0,n.Fl)((()=>R[t.passwordLevel])),passwordLevelName:(0,n.Fl)((()=>F[t.passwordLevel])),passwordLevelColor:(0,n.Fl)((()=>D[t.passwordLevel])),getCaptcha:async function(e){try{e.preventDefault();const{mobile:r}=await i("mobile");N=setInterval((()=>{t.time--<=0&&(t.time=60,t.smsSendBtn=!1,clearInterval(N))}),1e3);const n=S.Z.loading("验证码发送中...",0),{captcha:a}=await class{static getSmsCaptcha(e){return B.Z.request({url:"/message/sms",method:"get",params:e})}}.getSmsCaptcha({mobile:r});setTimeout(n,3e3),x.success({message:"提示",description:`验证码获取成功，您的验证码为：${a}`,duration:8})}catch(e){S.Z.destroy(),clearInterval(N),t.time=60,t.smsSendBtn=!1}},handleSubmit:async function(r){try{r.preventDefault(),t.registerBtn=!0;const n=await i(),{data:{email:a}}=await A.Z.register(n);S.Z.info("注册成功"),await e.push({path:"/user/registerResult",query:{email:a}})}catch(r){t.registerBtn=!1}}}}});V.render=v,V.__scopeId="data-v-39e1223d";var $=V}}]);