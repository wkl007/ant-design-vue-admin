"use strict";(self.webpackChunkant_desing_vue_admin=self.webpackChunkant_desing_vue_admin||[]).push([[685],{9113:function(e,t,a){a.d(t,{Z:function(){return n}});var o=a(1046);class n{static login(e){return o.Z.request({url:"/login/account",method:"post",data:e})}static getUserInfo(){return o.Z.request({url:"/currentUser",method:"get"})}static logout(){return o.Z.request({url:"/logout",method:"post"})}static register(e){return o.Z.request({url:"/register",method:"post",data:e})}}},889:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var o=a(6252),n=a(3577);(0,o.dD)("data-v-eac5fbf2");const s={class:"main register"},r=(0,o._)("h3",null,"注册",-1),l={style:{width:"240px"}},i=(0,o._)("div",{style:{"margin-top":"10px"}},[(0,o._)("span",null,"请至少输入 6 个字符。建议输入字母、数字、特殊字符组合。")],-1),c=(0,o.Uk)("+86"),u=(0,o.Uk)("+87"),d=(0,o.Uk)(" 注册 "),p=(0,o.Uk)(" 使用已有账户登录 ");(0,o.Cn)();a(4287);var m=a(9299),f=a(8376),v=a(2185),g=a(3765),w=a(2548),h=a(9293),b=a(9751),_={},W=4.5,C="24px",y="24px",k="topRight",Z=function(){return document.body},x=null;function I(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;switch(e){case"topLeft":t={left:"0px",top:a,bottom:"auto"};break;case"topRight":t={right:"0px",top:a,bottom:"auto"};break;case"bottomLeft":t={left:"0px",top:"auto",bottom:o};break;default:t={right:"0px",top:"auto",bottom:o}}return t}var L={success:v.Z,info:g.Z,error:w.Z,warning:h.Z};var q={open:function(e){var t=e.icon,a=e.type,n=e.description,s=e.message,r=e.btn,l=e.prefixCls||"ant-notification",i="".concat(l,"-notice"),c=void 0===e.duration?W:e.duration,u=null;if(t)u=function(){return(0,o.Wm)("span",{class:"".concat(i,"-icon")},[t])};else if(a){var d=L[a];u=function(){return(0,o.Wm)(d,{class:"".concat(i,"-icon ").concat(i,"-icon-").concat(a)},null)}}!function(e,t){var a=e.prefixCls,n=e.placement,s=void 0===n?k:n,r=e.getContainer,l=void 0===r?Z:r,i=e.top,c=e.bottom,u=e.closeIcon,d=void 0===u?x:u,p="".concat(a,"-").concat(s);_[p]?t(_[p]):f.Z.newInstance({prefixCls:a,class:"".concat(a,"-").concat(s),style:I(s,i,c),getContainer:l,closeIcon:function(){return(0,o.Wm)("span",{class:"".concat(a,"-close-x")},[d||(0,o.Wm)(b.Z,{class:"".concat(a,"-close-icon")},null)])}},(function(e){_[p]=e,t(e)}))}({prefixCls:l,placement:e.placement,top:e.top,bottom:e.bottom,getContainer:e.getContainer,closeIcon:e.closeIcon},(function(t){t.notice({content:function(){return(0,o.Wm)("div",{class:u?"".concat(i,"-with-icon"):""},[u&&u(),(0,o.Wm)("div",{class:"".concat(i,"-message")},[!n&&u?(0,o.Wm)("span",{class:"".concat(i,"-message-single-line-auto-margin")},null):null,s]),(0,o.Wm)("div",{class:"".concat(i,"-description")},[n]),r?(0,o.Wm)("span",{class:"".concat(i,"-btn")},[r]):null])},duration:c,closable:!0,onClose:e.onClose,onClick:e.onClick,key:e.key,style:e.style||{},class:e.class})}))},close:function(e){Object.keys(_).forEach((function(t){return _[t].removeNotice(e)}))},config:function(e){var t=e.duration,a=e.placement,o=e.bottom,n=e.top,s=e.getContainer,r=e.closeIcon;void 0!==t&&(W=t),void 0!==a&&(k=a),void 0!==o&&(y="number"==typeof o?"".concat(o,"px"):o),void 0!==n&&(C="number"==typeof n?"".concat(n,"px"):n),void 0!==s&&(Z=s),void 0!==r&&(x=r)},destroy:function(){Object.keys(_).forEach((function(e){_[e].destroy(),delete _[e]}))}};["success","info","warning","error"].forEach((function(e){q[e]=function(t){return q.open((0,m.Z)((0,m.Z)({},t),{type:e}))}})),q.warn=q.warning;var U=q,z=(a(586),a(1446)),B=a(2262),F=a(6007),S=a(2119),E=a(9113),P=a(1046);const j={0:"低",1:"低",2:"中",3:"强"},D={0:"error",1:"error",2:"warning",3:"success"},R={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"};let N;var $=(0,o.aZ)({name:"Register",setup(){const e=(0,S.tv)(),t=(0,B.qj)({time:60,smsSendBtn:!1,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000",registerBtn:!1}),a=(0,B.qj)({email:"",password:"",confirmPassword:"",mobile:"",captcha:""}),o=(0,B.qj)({email:[{required:!0,type:"email",message:"请输入邮箱地址"}],password:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,a)=>new Promise(((e,o)=>{let n=0;/[0-9]/.test(a)&&n++,/[a-zA-Z]/.test(a)&&n++,/[^0-9a-zA-Z_]/.test(a)&&n++,t.passwordLevel=n,t.percent=30*n,n>=2?(n>=3&&(t.percent=100),e(null)):(0===n&&(t.percent=10),o(new Error("密码强度不够")))}))}],confirmPassword:[{required:!0,message:"至少6位密码，区分大小写"},{validator:(e,t)=>new Promise(((e,o)=>{const n=a.password;t||o(new Error("请输入密码")),t&&n&&t.trim()!==n.trim()&&o(new Error("两次密码不一致")),e(null)}))}],mobile:[{required:!0,message:"请输入正确的手机号",pattern:/^1[3456789]\d{9}$/}],captcha:[{required:!0,message:"请输入验证码"}]}),{validateInfos:n,validate:s}=(0,F.Z)(a,o);return{...(0,B.BK)(t),form:a,validateInfos:n,passwordLevelClass:(0,B.Fl)((()=>D[t.passwordLevel])),passwordLevelName:(0,B.Fl)((()=>j[t.passwordLevel])),passwordLevelColor:(0,B.Fl)((()=>R[t.passwordLevel])),getCaptcha:async function(e){try{e.preventDefault();const{mobile:a}=await s("mobile");N=setInterval((()=>{t.time--<=0&&(t.time=60,t.smsSendBtn=!1,clearInterval(N))}),1e3);const o=z.Z.loading("验证码发送中...",0),{captcha:n}=await class{static getSmsCaptcha(e){return P.Z.request({url:"/message/sms",method:"get",params:e})}}.getSmsCaptcha({mobile:a});setTimeout(o,3e3),U.success({message:"提示",description:`验证码获取成功，您的验证码为：${n}`,duration:8})}catch(e){z.Z.destroy(),clearInterval(N),t.time=60,t.smsSendBtn=!1}},handleSubmit:async function(a){try{a.preventDefault(),t.registerBtn=!0;const o=await s(),{data:{email:n}}=await E.Z.register(o);z.Z.info("注册成功"),await e.push({path:"/user/registerResult",query:{email:n}})}catch(a){t.registerBtn=!1}}}}});$.render=function(e,t,a,m,f,v){const g=(0,o.up)("a-input"),w=(0,o.up)("a-form-item"),h=(0,o.up)("a-progress"),b=(0,o.up)("a-input-password"),_=(0,o.up)("a-popover"),W=(0,o.up)("a-select-option"),C=(0,o.up)("a-select"),y=(0,o.up)("mail-outlined"),k=(0,o.up)("a-col"),Z=(0,o.up)("a-button"),x=(0,o.up)("a-row"),I=(0,o.up)("router-link"),L=(0,o.up)("a-form");return(0,o.wg)(),(0,o.iD)("div",s,[r,(0,o.Wm)(L,{layout:"vertical",model:e.form,onSubmit:e.handleSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.email)),{default:(0,o.w5)((()=>[(0,o.Wm)(g,{size:"large",placeholder:"邮箱",value:e.form.email,"onUpdate:value":t[0]||(t[0]=t=>e.form.email=t)},null,8,["value"])])),_:1},16),(0,o.Wm)(_,{placement:"rightTop",trigger:"focus","get-popup-container":e=>e.parentElement,visible:e.passwordLevelChecked,"onUpdate:visible":t[3]||(t[3]=t=>e.passwordLevelChecked=t)},{content:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o._)("div",{class:(0,n.C_)(e.passwordLevelClass)}," 强度："+(0,n.zw)(e.passwordLevelName),3),(0,o.Wm)(h,{percent:e.percent,"show-info":!1,"stroke-color":e.passwordLevelColor},null,8,["percent","stroke-color"]),i])])),default:(0,o.w5)((()=>[(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.password)),{default:(0,o.w5)((()=>[(0,o.Wm)(b,{size:"large",placeholder:"至少6位密码，区分大小写",value:e.form.password,"onUpdate:value":t[1]||(t[1]=t=>e.form.password=t),onFocus:t[2]||(t[2]=t=>e.passwordLevelChecked=!0)},null,8,["value"])])),_:1},16)])),_:1},8,["get-popup-container","visible"]),(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.confirmPassword)),{default:(0,o.w5)((()=>[(0,o.Wm)(b,{size:"large",placeholder:"确认密码",value:e.form.confirmPassword,"onUpdate:value":t[4]||(t[4]=t=>e.form.confirmPassword=t)},null,8,["value"])])),_:1},16),(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.mobile)),{default:(0,o.w5)((()=>[(0,o.Wm)(g,{size:"large",placeholder:"11 位手机号",value:e.form.mobile,"onUpdate:value":t[5]||(t[5]=t=>e.form.mobile=t)},{addonBefore:(0,o.w5)((()=>[(0,o.Wm)(C,{size:"large","default-value":"+86"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{value:"+86"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o.Wm)(W,{value:"+87"},{default:(0,o.w5)((()=>[u])),_:1})])),_:1})])),_:1},8,["value"])])),_:1},16),(0,o.Wm)(x,{gutter:16},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{span:16},{default:(0,o.w5)((()=>[(0,o.Wm)(w,(0,n.vs)((0,o.F4)(e.validateInfos.captcha)),{default:(0,o.w5)((()=>[(0,o.Wm)(g,{size:"large",placeholder:"验证码",value:e.form.captcha,"onUpdate:value":t[6]||(t[6]=t=>e.form.captcha=t)},{prefix:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"prefix-icon"})])),_:1},8,["value"])])),_:1},16)])),_:1}),(0,o.Wm)(k,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{size:"large",block:"",onClick:e.getCaptcha},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.smsSendBtn?`${e.time} s`:"获取验证码"),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{size:"large",type:"primary",loading:e.registerBtn,disabled:e.registerBtn,"html-type":"submit",style:{width:"50%"}},{default:(0,o.w5)((()=>[d])),_:1},8,["loading","disabled"]),(0,o.Wm)(I,{class:"login",to:"/user/login",style:{float:"right","line-height":"40px"}},{default:(0,o.w5)((()=>[p])),_:1})])),_:1})])),_:1},8,["model","onSubmit"])])},$.__scopeId="data-v-eac5fbf2";var A=$}}]);